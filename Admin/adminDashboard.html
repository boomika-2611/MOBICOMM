<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MobiComm - Admin Business Recharge Solutions</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">

    <link rel="stylesheet" href="adminDashboardstyle.css">

</head>

<body>

    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg">
        <div class="container">
            <a class="navbar-brand" href="#" onclick="loadHome()">
                <span class="fw-bold text-dark">MOBI</span><span class="fw-bold text-danger"> COMM</span>
                <span class="tagline">Prepaid | Recharge</span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" onclick="loadHome()">Home</a></li>
                    <li class="nav-item"><a class="nav-link" onclick="loadPrepaidPlans()">Prepaid Plans</a></li>
                    <li class="nav-item"><a class="nav-link" onclick="loadUserManagement()">User Management</a></li>


                    <!-- Role Dropdown with Admin & Subscribers -->
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="accountDropdown" role="button"
                            data-bs-toggle="dropdown">
                            <i class="fas fa-user-circle"></i> Account
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="accountDropdown">
                            <li><a class="dropdown-item" href="#" onclick="loadAdminProfile()"><i
                                        class="fas fa-user"></i>Profile</a>
                            </li>
                            <li><a class="dropdown-item" onclick="loadPrepaidPlans()" href="#"><i
                                        class="fas fa-user-friends"></i>view Plans</a></li>
                            <li><a class="dropdown-item" onclick="loadUserManagement()" href="#"><i
                                        class="fas fa-wallet"></i> User Management</a></li>
                            <li><a class="dropdown-item" onclick="loadKYC()" href="#"><i class="fas fa-wallet"></i> KYC
                                    Banking</a></li>
                            <li><a class="dropdown-item" href="../index.html"><i
                                        class="fas fa-question-circle"></i>Logout</a></li>

                        </ul>
            </div>
        </div>
    </nav>

    <!-- Content Area -->
    <div id="content">
        <!-- Home Page Content -->
        <div id="home">
            <!-- Dashboard Overview -->


            <div class="container dashboard-container">
                <h3 class="text-center title">MobiComm Admin Dashboard</h3>
                <p class="text-center text-muted">Monitor user activity, revenue, and performance</p>

                <div class="row g-4">
                    <div class="col-md-6 col-lg-4">
                        <div class="card p-4 shadow-sm border-0">
                            <h6 class="text-primary">Active Users</h6>
                            <div class="chart-container">
                                <canvas id="activeUsersChart"></canvas>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 col-lg-4">
                        <div class="card p-4 shadow-sm border-0">
                            <h6 class="text-success">Most Used Subscription Plan</h6>
                            <div class="chart-container">
                                <canvas id="popularPlanChart"></canvas>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 col-lg-4">
                        <div class="card p-4 shadow-sm border-0">
                            <h6 class="text-danger">New Registrations</h6>
                            <div class="chart-container">
                                <canvas id="newRegistrationsChart"></canvas>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 col-lg-6">
                        <div class="card p-4 shadow-sm border-0">
                            <h6 class="text-warning">Payment Trends</h6>
                            <div class="chart-container">
                                <canvas id="paymentTrendsChart"></canvas>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 col-lg-6">
                        <div class="card p-4 shadow-sm border-0">
                            <h6 class="text-info">Admin Actions Summary</h6>
                            <div class="chart-container">
                                <canvas id="adminActionsChart"></canvas>
                            </div>
                        </div>
                    </div>

                </div>
                <div class="text-center mt-4">
                    <button id="downloadReport" class="btn btn-primary" onclick="downloadReport()">Download
                        Reports</button>
                </div>
            </div>
        </div>
    </div>



    <!-- Prepaid Plans Content -->
    <div id="prepaidPlans" class="container mt-5" style="display: none;">
        <h2 class="text-center mb-4">Manage Prepaid Plans</h2>
        <div class="row">
            <!-- Popular Plans -->
            <div class="col-md-6 mt-4">
                <div class="card">
                    <div class="card-header">Popular Plans</div>
                    <div class="card-body">
                        <ul class="list-group" id="popularPlans">
                            <li class="list-group-item">₹299 - 28 Days | 1.5GB/Day
                                <button class="btn btn-sm btn-warning btn-action"
                                    onclick="openEditModal(this)">Edit</button>
                                <button class="btn btn-sm btn-danger btn-action"
                                    onclick="openDeleteModal(this)">Delete</button>
                            </li>
                            <li class="list-group-item">₹599 - 84 Days | 2GB/Day
                                <button class="btn btn-sm btn-warning btn-action"
                                    onclick="openEditModal(this)">Edit</button>
                                <button class="btn btn-sm btn-danger btn-action"
                                    onclick="openDeleteModal(this)">Delete</button>
                            </li>

                        </ul>
                        <button class="btn btn-success mt-3 w-100" onclick="openAddModal('popularPlans')">Add New
                            Plan</button>
                    </div>
                </div>
            </div>

            <!-- Validity Plans -->
            <div class="col-md-6 mt-4">
                <div class="card">
                    <div class="card-header">Validity Plans</div>
                    <div class="card-body">
                        <ul class="list-group" id="validityPlans">
                            <li class="list-group-item">₹999 - 365 Days | Unlimited Calls
                                <button class="btn btn-sm btn-warning btn-action"
                                    onclick="openEditModal(this)">Edit</button>
                                <button class="btn btn-sm btn-danger btn-action"
                                    onclick="openDeleteModal(this)">Delete</button>
                            </li>
                            <li class="list-group-item">₹899 - 345 Days | Unlimited Calls
                                <button class="btn btn-sm btn-warning btn-action"
                                    onclick="openEditModal(this)">Edit</button>
                                <button class="btn btn-sm btn-danger btn-action"
                                    onclick="openDeleteModal(this)">Delete</button>
                            </li>
                        </ul>
                        <button class="btn btn-success mt-3 w-100" onclick="openAddModal('validityPlans')">Add New
                            Plan</button>
                    </div>
                </div>
            </div>

            <!-- Data Plans -->
            <div class="col-md-6 mt-4">
                <div class="card">
                    <div class="card-header">Data Plans</div>
                    <div class="card-body">
                        <ul class="list-group" id="dataPlans">
                            <li class="list-group-item">₹399 - 56 Days | 3GB/Day
                                <button class="btn btn-sm btn-warning btn-action"
                                    onclick="openEditModal(this, 'dataPlans')">Edit</button>
                                <button class="btn btn-sm btn-danger btn-action"
                                    onclick="openDeleteModal(this)">Delete</button>
                            </li>
                            <li class="list-group-item">₹99 - 15 Days | 2GB Data
                                <button class="btn btn-sm btn-warning btn-action"
                                    onclick="openEditModal(this, 'dataPlans')">Edit</button>
                                <button class="btn btn-sm btn-danger btn-action"
                                    onclick="openDeleteModal(this)">Delete</button>
                            </li>
                        </ul>
                        <button class="btn btn-success mt-3 w-100" onclick="openAddModal('dataPlans')">Add New
                            Plan</button>
                    </div>
                </div>
            </div>

            <!-- Top-Up Plans -->
            <div class="col-md-6 mt-4">
                <div class="card">
                    <div class="card-header">Top-Up Plans</div>
                    <div class="card-body">
                        <ul class="list-group" id="topupPlans">
                            <li class="list-group-item">₹50 - 28 Days | Talktime: ₹39.37
                                <button class="btn btn-sm btn-warning btn-action"
                                    onclick="openEditModal(this)">Edit</button>
                                <button class="btn btn-sm btn-danger btn-action"
                                    onclick="openDeleteModal(this)">Delete</button>
                            </li>
                            <li class="list-group-item">₹100 - 30 Days | Talktime: ₹81.75
                                <button class="btn btn-sm btn-warning btn-action"
                                    onclick="openEditModal(this)">Edit</button>
                                <button class="btn btn-sm btn-danger btn-action"
                                    onclick="openDeleteModal(this)">Delete</button>
                            </li>
                        </ul>
                        <button class="btn btn-success mt-3 w-100" onclick="openAddModal('topupPlans')">Add New
                            Plan</button>
                    </div>
                </div>
            </div>
            <!-- ISD Plans -->


            <div class="col-md-6 mt-4">
                <div class="card">
                    <div class="card-header">ISD Plans</div>
                    <div class="card-body">
                        <ul class="list-group" id="isdPlans">
                            <li class="list-group-item">₹50 - 28 Days | Talktime: ₹39.37
                                <button class="btn btn-sm btn-warning btn-action"
                                    onclick="openEditModal(this)">Edit</button>
                                <button class="btn btn-sm btn-danger btn-action"
                                    onclick="openDeleteModal(this)">Delete</button>
                            </li>
                            <li class="list-group-item">₹100 - 30 Days | Talktime: ₹81.75
                                <button class="btn btn-sm btn-warning btn-action"
                                    onclick="openEditModal(this)">Edit</button>
                                <button class="btn btn-sm btn-danger btn-action"
                                    onclick="openDeleteModal(this)">Delete</button>
                            </li>
                        </ul>
                        <button class="btn btn-success mt-3 w-100" onclick="openAddModal('isdPlans')">Add New
                            Plan</button>
                    </div>
                </div>
            </div>

            <!-- COMBO  Plans -->

            <div class="col-md-6 mt-4">
                <div class="card">
                    <div class="card-header">Combo/Unlimited Plans</div>
                    <div class="card-body">
                        <ul class="list-group" id="comboPlans">
                            <li class="list-group-item">₹399 - 28 Days | Unlimited Calls + 2GB/Day + 100 SMS/Day
                                <button class="btn btn-sm btn-warning btn-action"
                                    onclick="openEditModal(this)">Edit</button>
                                <button class="btn btn-sm btn-danger btn-action"
                                    onclick="openDeleteModal(this)">Delete</button>
                            </li>
                            <li class="list-group-item">₹799 - 84 Days | Unlimited Calls + 1.5GB/Day + 100 SMS/Day
                                <button class="btn btn-sm btn-warning btn-action"
                                    onclick="openEditModal(this)">Edit</button>
                                <button class="btn btn-sm btn-danger btn-action"
                                    onclick="openDeleteModal(this)">Delete</button>
                            </li>
                            <li class="list-group-item">₹999 - 365 Days | Unlimited Calls + 2GB/Day + 100 SMS/Day
                                <button class="btn btn-sm btn-warning btn-action"
                                    onclick="openEditModal(this)">Edit</button>
                                <button class="btn btn-sm btn-danger btn-action"
                                    onclick="openDeleteModal(this)">Delete</button>
                            </li>
                        </ul>
                        <button class="btn btn-success mt-3 w-100" onclick="openAddModal('comboPlans')">Add New
                            Plan</button>
                    </div>
                </div>
            </div>


        </div>
    </div>



    <!-- Add/Edit Modal -->
    <div class="modal fade" id="planModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="planModalTitle">Add/Edit Plan</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-2">
                        <label for="planAmount" class="form-label">Amount (₹)</label>
                        <input type="number" id="planAmount" class="form-control" placeholder="Enter amount">
                    </div>
                    <div class="mb-2">
                        <label for="planValidity" class="form-label">Validity (Days)</label>
                        <input type="number" id="planValidity" class="form-control" placeholder="Enter validity">
                    </div>
                    <div class="mb-2">
                        <label for="planData" class="form-label">Data (GB/Day)</label>
                        <input type="text" id="planData" class="form-control"
                            placeholder="Enter data limit (e.g., 2GB/Day, Unlimited Calls , Talktime)">
                    </div>
                    <div class="mt-3">
                        <strong>Preview:</strong> <span id="planPreview">-</span>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="savePlanButton">Save</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div class="modal fade" id="deleteModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Delete Plan</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    Are you sure you want to delete this plan?
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-danger" id="confirmDeleteButton">Delete</button>
                </div>
            </div>
        </div>
    </div>

    <!-- //Usermanagement -->

    <div id="userManagement" class="container mt-5" style="display: none;">
        <h2 class="text-center mb-4">User Management</h2>
        <div class="row mb-3">
            <div class="col-md-4">
                <input type="text" id="searchName" class="form-control" placeholder="Search by Customer Name"
                    onkeyup="filterUsers()">
            </div>
            <div class="col-md-3">
                <input type="date" id="startDate" class="form-control" onchange="filterUsers()">
            </div>
            <div class="col-md-3">
                <input type="date" id="endDate" class="form-control" onchange="filterUsers()">
            </div>
            <div class="col-md-2">
                <button class="btn btn-primary w-100" onclick="filterUsers()">Search</button>
            </div>
        </div>
        <div class="card">
            <div class="card-body table-responsive">
                <table class="table table-bordered">
                    <thead class="table-dark">
                        <tr>
                            <th>Mobile Number</th>
                            <th>Customer Name</th>
                            <th>Start Date</th>
                            <th>End Date</th>
                            <th>Days Remaining</th>
                            <th>Notification</th>
                        </tr>
                    </thead>
                    <tbody id="userTable"></tbody>
                </table>
                <nav>
                    <ul class="pagination justify-content-center" id="pagination"></ul>
                </nav>
            </div>
        </div>
    </div>

    <!-- ✅ Bootstrap Modal for Notifications -->
    <div class="modal fade" id="notificationModal" tabindex="-1" aria-labelledby="notificationModalLabel"
        aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="notificationModalLabel">Notification</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="modalMessage">
                    <!-- Message will be updated here dynamically -->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>


    <!-- Admin KYC Verification Section -->
    <div class="container">
        <div id="kycDetails" class="admin-kyc" style="display: none;">
            <h2>KYC Verification</h2>

            <!-- Clear Data Button -->
            <div class="card-body table-responsive">
                <button class="clear-btn" onclick="clearKYCData()">Clear Data</button>

                <table class="table table-bordered text-center">
                    <thead>
                        <tr>
                            <th>Mobile Number</th>
                            <th>Customer Name</th>
                            <th>Aadhar Document</th>
                            <th>Status</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody id="kycTable">
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Admin Profile Section -->
    <div id="adminProfile" class="container" style="display: none;">
        <div class="profile-card">
            <div class="profile-header">
                <p class="welcome-text">Welcome, <span id="adminName">Admin</span>!</p>
                <img id="adminProfilePic" src="https://via.placeholder.com/100" class="profile-image">
            </div>

            <div class="profile-details">
                <p class="profile-label"><i class="fas fa-user profile-icon"></i> Name:</p>
                <p class="profile-value" id="displayAdminName">Admin</p>

                <p class="profile-label"><i class="fas fa-envelope profile-icon"></i> Email:</p>
                <p class="profile-value" id="displayAdminEmail">admin@mobicomm.in</p>

                <p class="profile-label"><i class="fas fa-phone profile-icon"></i> Mobile:</p>
                <p class="profile-value" id="displayAdminMobile">+1234567890</p>
            </div>

            <button class="btn-edit" onclick="toggleEdit()">Edit Profile</button>
        </div>

        <div class="edit-section mt-3">
            <div class="edit-profile-card">
                <h4 class="text-center mb-3">Edit Profile</h4>

                <div class="text-center mb-4">
                    <img id="editAdminProfilePic" src="https://via.placeholder.com/100" class="profile-image">
                    <input type="file" id="uploadAdminPic" class="form-control mt-2" accept="image/*">
                </div>

                <label class="mt-3">Admin Name</label>
                <input type="text" id="editAdminName" class="form-control" placeholder="Enter Admin Name">

                <label class="mt-3">Email</label>
                <input type="email" id="editAdminEmail" class="form-control" placeholder="Enter Email">

                <label class="mt-3">Alternate Mobile</label>
                <input type="tel" id="editAdminMobile" class="form-control" placeholder="Enter Alternate Mobile">

                <label class="mt-3">New Password</label>
                <input type="password" id="editAdminPassword" class="form-control" placeholder="Enter New Password">

                <button class="btn-edit w-100 mt-3" onclick="saveAdminProfile()">Save Changes</button>
            </div>
        </div>
    </div>

    <!-- Back to Top Arrow -->
    <button id="backToTop" onclick="scrollToTop()">
        ↑
    </button>


    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="row">
                <!-- Company Information -->
                <div class="col-md-4">
                    <h5 class="fw-bold">About MobiComm</h5>
                    <p>MobiComm is a leading telecom recharge and solutions provider, offering seamless connectivity
                        with exclusive offers, secure transactions, and 24/7 customer support.</p>
                </div>

                <!-- Quick Links -->
                <div class="col-md-2">
                    <h5 class="fw-bold">Quick Links</h5>
                    <ul class="list-unstyled">
                        <li><a href="#" onclick="loadHome()">Home</a></li>
                        <li><a href="#" onclick="loadPrepaidPlans()">Prepaid Plans</a></li>
                        <li><a href="#" onclick="loadUserManagement()">User Management</a></li>

                    </ul>
                </div>

                <!-- Contact Information -->
                <div class="col-md-3">
                    <h5 class="fw-bold">Contact Us</h5>
                    <p><i class="fas fa-map-marker-alt"></i> MobiComm HQ, Bangalore, India</p>
                    <p><i class="fas fa-phone"></i> +91 90251 59692</p>
                    <p><i class="fas fa-envelope"></i> support@mobicomm.com</p>
                </div>

                <!-- Social Media Links -->
                <div class="col-md-3">
                    <h5 class="fw-bold">Follow Us</h5>
                    <a href="#" class="social-icon"><i class="fab fa-facebook"></i></a>
                    <a href="#" class="social-icon"><i class="fab fa-twitter"></i></a>
                    <a href="#" class="social-icon"><i class="fab fa-linkedin"></i></a>
                    <a href="#" class="social-icon"><i class="fab fa-instagram"></i></a>
                    <a href="#" class="social-icon"><i class="fab fa-youtube"></i></a>
                </div>
            </div>

            <!-- Copyright Section -->
            <div class="text-center mt-3">
                <p>© 2025 MobiComm. All Rights Reserved. | <a href="#">Privacy Policy</a> | <a href="#">Terms of
                        Service</a></p>
            </div>
        </div>

    </footer>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.23/jspdf.plugin.autotable.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.25/jspdf.plugin.autotable.min.js"></script>

    <script src="adminDashboardscript.js"></script>

</body>

</html>